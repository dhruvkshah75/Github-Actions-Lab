name: passing variables from one job to the other

on:
  workflow_dispatch:

# For INTRA-Job output --> input 
  # write to $GITHUB_OUTPUT and reference in jobs to outputs and set needs as they cannot run paralle 
  # reference with ${{}} symbol 
# For INTRA-Job environment var
  # Write to $GITHUB_ENV and reference with $VAR


jobs:
  # Job 1
  producer:
    runs-on: ubuntu-latest
    # the output var stores the output generated by the job
    outputs:
      foo: ${{ steps.generate-foo.outputs.foo }}  # sets the output 
    steps:
      - name: Generate and export foo
        id: generate-foo  # this is used to mark this step for storing the output 
        run: |
          foo=bar

          # This is step output
          echo "FOO=${foo}" >> "$GITHUB_OUTPUT"

          # this is the (job scoped env variable) only accessible within the job  
          echo "FOO=${foo}" >> "$GITHUB_ENV"

      - name: Insect values inside producer 
        run: |
          echo "FOO (set via the GITHUB_ENV):    $FOO"
          echo "FOO (via the github output):     ${{ steps.generate-foo.outputs.foo }}"

  # Job 2
  consumer:
    runs-on: ubuntu-latest
    needs:
      producer
    steps:
      - name: consumes the output by the producer (Job 1)
        run: |
          echo "FOO (from the output of the producer):    ${{ needs.producer.outputs.foo }}"

          
    # ${{ needs.producer.outputs.foo }} -->> accessed like this in the consumer job 
    # echo "FOO=${foo}" >> "$GITHUB_OUTPUT"   -->> to write it to the outputs of the job 

